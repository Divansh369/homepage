(()=>{var e={};e.id=223,e.ids=[223],e.modules={440:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},576:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/divansh/homepage/frontend/app/edit-project/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/divansh/homepage/frontend/app/edit-project/[id]/page.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2704:()=>{},2894:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,N:()=>n});var s=r(687),o=r(3210);let a=(0,o.createContext)(void 0),n=({children:e})=>{let[t,r]=(0,o.useState)("light");(0,o.useEffect)(()=>{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=e||(t?"dark":"light");r(s),document.documentElement.setAttribute("data-theme",s)},[]);let n=()=>{r(e=>{let t="light"===e?"dark":"light";return localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t),t})},i=(0,o.useMemo)(()=>({theme:t,toggleTheme:n}),[t]);return(0,s.jsx)(a.Provider,{value:i,children:e})},i=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3509:(e,t,r)=>{Promise.resolve().then(r.bind(r,8972))},3612:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(5239),o=r(8088),a=r(8170),n=r.n(a),i=r(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["edit-project",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,576)),"/home/divansh/homepage/frontend/app/edit-project/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/divansh/homepage/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/divansh/homepage/frontend/app/edit-project/[id]/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/edit-project/[id]/page",pathname:"/edit-project/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3873:e=>{"use strict";e.exports=require("path")},5365:(e,t,r)=>{Promise.resolve().then(r.bind(r,8402))},6055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(1658);let o=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},6189:(e,t,r)=>{"use strict";var s=r(5773);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6974:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(687),o=r(3210),a=r(5814),n=r.n(a),i=r(6189),l=r(36),d=r(2894),c=r(474);let m=(0,l.default)(async()=>{},{loadableGenerated:{modules:["app/edit-project/[id]/page.tsx -> react-select"]},ssr:!1,loading:()=>(0,s.jsx)("div",{style:{minHeight:"38px",padding:"8px 10px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#eee",color:"#aaa"},children:"Loading..."})});function p(){let{theme:e}=(0,d.D)(),t=(0,i.useRouter)(),r=(0,i.useParams)().id,[a,l]=(0,o.useState)({projectName:"",description:"",iconFilename:"",startCommand:"",stopCommand:"",scheme:"http",port:"",host:""}),[p,h]=(0,o.useState)([]),[u,x]=(0,o.useState)([]),[v,j]=(0,o.useState)(!0),[f,b]=(0,o.useState)(!1),[g,P]=(0,o.useState)(null),[y,C]=(0,o.useState)(null),[N,w]=(0,o.useState)(null),F=(0,o.useCallback)(()=>u.map(e=>({value:String(e.id),label:`${e.name} (${e.label_type})`})),[u]),S=e=>{l(t=>({...t,[e.target.name]:e.target.value}))},k=async e=>{let t=e.target.files?.[0];if(!t)return;w(null);let r=new FormData;r.append("icon",t);try{let e=await fetch("/api/upload/icon",{method:"POST",body:r}),t=await e.json();if(!e.ok)throw Error(t.error||"Upload failed");l(e=>({...e,iconFilename:t.filePath}))}catch(e){w(e.message)}},_=async e=>{e.preventDefault(),P(null),C(null),b(!0);let s=p.map(e=>parseInt(e.value)),o={...a,selectedLabels:s};try{let e=await fetch(`/api/projects/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to update project");C(`Project "${o.projectName}" updated successfully!`),setTimeout(()=>t.push("/"),2e3)}catch(e){P(`Failed to update project: ${e.message}`)}finally{b(!1)}};if(v)return(0,s.jsx)("div",{className:`container ${e}`,children:(0,s.jsx)("p",{className:"loading-indicator",children:"Loading project data..."})});if(g&&!a.projectName)return(0,s.jsxs)("div",{className:`container ${e}`,children:[(0,s.jsx)("p",{className:"error-message",children:g}),(0,s.jsx)(n(),{href:"/",children:"← Back to Dashboard"})]});let E=a.iconFilename?.startsWith("/uploads")?`http://localhost:1024${a.iconFilename}`:a.iconFilename;return(0,s.jsxs)("div",{className:`container ${e}`,children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsxs)("h1",{children:["Edit Project: ",a.projectName]}),(0,s.jsx)(n(),{href:"/",className:"back-link",children:"← Back to Dashboard"})]}),(0,s.jsx)("div",{className:"add-form-container",children:(0,s.jsxs)("form",{onSubmit:_,className:"add-form",children:[g&&(0,s.jsx)("p",{className:"error-message",children:g}),y&&(0,s.jsx)("p",{className:"success-message",children:y}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"icon-upload",children:"Project Icon"}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[E&&(0,s.jsx)(c.default,{src:E,alt:"Icon Preview",width:40,height:40,style:{borderRadius:"5px",border:"1px solid var(--color-border)"},unoptimized:!0}),(0,s.jsx)("input",{type:"file",id:"icon-upload",name:"icon",onChange:k,accept:"image/*"})]}),N&&(0,s.jsx)("small",{style:{color:"var(--color-error-text)",marginTop:"5px"},children:N}),(0,s.jsx)("small",{children:"Upload an image to replace the icon path below."})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"iconFilename",children:"Icon Path:"}),(0,s.jsx)("input",{type:"text",id:"iconFilename",name:"iconFilename",value:a.iconFilename,onChange:S,placeholder:"/uploads/icons/...",readOnly:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"projectName",children:"Name:"}),(0,s.jsx)("input",{type:"text",id:"projectName",name:"projectName",value:a.projectName,onChange:S,required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"description",children:"Description:"}),(0,s.jsx)("input",{type:"text",id:"description",name:"description",value:a.description,onChange:S})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"startCommand",children:"Start Command:"}),(0,s.jsx)("input",{type:"text",id:"startCommand",name:"startCommand",value:a.startCommand,onChange:S,required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"stopCommand",children:"Stop Command:"}),(0,s.jsx)("input",{type:"text",id:"stopCommand",name:"stopCommand",value:a.stopCommand,onChange:S})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"port",children:"Port:"}),(0,s.jsx)("input",{type:"number",id:"port",name:"port",value:a.port,onChange:S,required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"scheme",children:"Scheme:"}),(0,s.jsxs)("select",{id:"scheme",name:"scheme",value:a.scheme,onChange:S,children:[(0,s.jsx)("option",{value:"http",children:"http"}),(0,s.jsx)("option",{value:"https",children:"https"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"host",children:"Host:"}),(0,s.jsx)("input",{type:"text",id:"host",name:"host",value:a.host,onChange:S})]}),(0,s.jsxs)("div",{className:"form-group label-selector",children:[(0,s.jsx)("label",{htmlFor:"labels",children:"Assign Labels:"}),(0,s.jsx)(m,{instanceId:"edit-project-label-select",inputId:"labels",isMulti:!0,name:"labels",options:F(),className:"react-select-instance",classNamePrefix:"react-select",value:p,onChange:e=>{h(e)}})]}),(0,s.jsx)("button",{type:"submit",className:"action-button add-button",disabled:f,children:f?"Saving...":"Save Changes"})]})})]})}},7288:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},8014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(7413),o=r(8972);function a({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsxs)("body",{children:[(0,s.jsx)(o.Providers,{children:e})," "]})})}r(2704)},8402:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>a});var s=r(687),o=r(2894);function a({children:e}){return(0,s.jsx)(o.N,{children:e})}},8716:(e,t,r)=>{Promise.resolve().then(r.bind(r,6974))},8972:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/divansh/homepage/frontend/app/providers.tsx","Providers")},8988:(e,t,r)=>{Promise.resolve().then(r.bind(r,576))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,825,567,277],()=>r(3612));module.exports=s})();