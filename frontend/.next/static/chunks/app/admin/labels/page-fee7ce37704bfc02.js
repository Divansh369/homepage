(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{435:(e,t,a)=>{"use strict";function n(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[a,n]of e)if(!Object.is(n,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let a of e)if(!t.has(a))return!1;return!0}let a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(let n of a)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}a.d(t,{x:()=>n})},1897:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(5155),r=a(2115),i=a(6874),o=a.n(i),s=a(3626),l=a(435);function c(){let{availableLabels:e,isLoading:t,error:a,fetchInitialData:i}=(0,s.I)(e=>({availableLabels:e.availableLabels,isLoading:e.isLoading,error:e.error,fetchInitialData:e.fetchInitialData}),l.x),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)({name:"",type:"language"});(0,r.useEffect)(()=>{0===e.length&&i()},[e.length,i]);let f=e=>{u(e.id),h({name:e.name,type:e.label_type})},p=()=>{u(null)},j=e=>{let{name:t,value:a}=e.target;h(e=>({...e,[t]:a}))},b=async e=>{try{let t=await fetch("".concat("http://localhost:1024","/api/labels/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to update label");await i(),u(null)}catch(e){alert("Failed to save label: ".concat(e.message))}},y=async(e,t)=>{if(window.confirm('Are you sure you want to delete the label "'.concat(t,'"? This will remove it from all projects.')))try{let t=await fetch("".concat("http://localhost:1024","/api/labels/").concat(e),{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete label");await i()}catch(e){alert("Failed to delete label: ".concat(e.message))}};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"admin-page-header",children:[(0,n.jsx)("h2",{children:"Manage Labels"}),(0,n.jsx)(o(),{href:"/add-label",className:"action-button nav-add-button",children:"+ Add New Label"})]}),t&&(0,n.jsx)("p",{children:"Loading labels..."}),a&&(0,n.jsx)("p",{className:"error-message",children:a}),!t&&(0,n.jsx)("div",{className:"admin-table-container",children:(0,n.jsxs)("table",{className:"admin-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Type"}),(0,n.jsx)("th",{style:{width:"200px"},children:"Actions"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>{let t=c===e.id;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:t?(0,n.jsx)("input",{type:"text",name:"name",className:"inline-edit-input",value:d.name,onChange:j}):e.name}),(0,n.jsx)("td",{children:t?(0,n.jsxs)("select",{name:"type",className:"inline-edit-input",value:d.type,onChange:j,children:[(0,n.jsx)("option",{value:"language",children:"language"}),(0,n.jsx)("option",{value:"utility",children:"utility"})]}):e.label_type}),(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:"action-cell",children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>b(e.id),className:"action-button-table save",children:"Save"}),(0,n.jsx)("button",{onClick:p,className:"action-button-table cancel",children:"Cancel"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>f(e),className:"action-button-table edit",children:"Edit"}),(0,n.jsx)("button",{onClick:()=>y(e.id,e.name),className:"action-button-table delete",children:"Delete"})]})})})]},e.id)})})]})}),!t&&0===e.length&&(0,n.jsx)("p",{children:"No labels found."})]})}},2436:(e,t,a)=>{"use strict";var n=a(2115),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,o=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!r(e,a)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),n=i({inst:{value:a,getSnapshot:t}}),r=n[0].inst,u=n[1];return s(function(){r.value=a,r.getSnapshot=t,c(r)&&u({inst:r})},[e,a,t]),o(function(){return c(r)&&u({inst:r}),e(function(){c(r)&&u({inst:r})})},[e]),l(a),a};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},3626:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,I:()=>o});var n=a(8693),r=a(435);let i=()=>o(e=>({isAuthenticated:e.isAuthenticated,checkAuthStatus:e.checkAuthStatus}),r.x),o=(0,n.vt)((e,t)=>({isAuthenticated:null,allProjects:[],availableLabels:[],activeProjects:{},startingProjects:new Set,isLoading:!0,error:null,checkAuthStatus:async()=>{try{let t=await fetch("/api/auth/status");if(!t.ok)throw Error("Auth check request failed");let a=await t.json();e({isAuthenticated:a.isAuthenticated})}catch(t){console.error("Auth check failed:",t),e({isAuthenticated:!1})}},logout:async()=>{try{await fetch("/api/logout",{method:"POST"})}catch(e){console.error("Logout failed:",e)}finally{e({isAuthenticated:!1})}},fetchInitialData:async()=>{e({isLoading:!0,error:null});try{let[t,a]=await Promise.all([fetch("/api/projects"),fetch("/api/labels")]);if(!t.ok)throw Error("Failed to fetch projects");if(!a.ok)throw Error("Failed to fetch labels");let n=await t.json(),r=await a.json(),i={};if(n.length>0){let e=n.map(e=>fetch("/api/check-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({port:e.port})}).then(e=>e.json()).then(t=>({name:e.project_name,running:t.running})).catch(()=>({name:e.project_name,running:!1})));(await Promise.all(e)).forEach(e=>{i[e.name]=e.running})}e({allProjects:n,availableLabels:r,activeProjects:i,isLoading:!1})}catch(t){e({error:t.message,isLoading:!1})}},handleStartProject:async a=>{let{startingProjects:n,activeProjects:r}=t();if(!n.has(a)&&!r[a]){e({startingProjects:new Set(n).add(a)});try{let e=await fetch("/api/start-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:a})});if(!e.ok)throw Error(await e.text())}catch(t){console.error("Error starting project:",t),e(e=>({error:"Failed to start ".concat(a),startingProjects:new Set([...e.startingProjects].filter(e=>e!==a))}))}}},handleStopProject:async e=>{try{await fetch("/api/stop-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:e})})}catch(e){console.error("Error stopping project:",e)}},handleDeleteProject:async(t,a)=>{if(window.confirm('Are you sure you want to delete "'.concat(a,'"? This cannot be undone.')))try{let a=await fetch("/api/projects/".concat(t),{method:"DELETE"});if(!a.ok)throw Error((await a.json()).error||"Delete failed");e(e=>({allProjects:e.allProjects.filter(e=>e.id!==t)}))}catch(e){console.error("Error deleting project:",e)}},saveOrder:async(a,n)=>{let r=t().allProjects;e({allProjects:n});try{let e=await fetch("/api/projects/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderedIds:a})});if(!e.ok)throw Error((await e.json()).error||"Save order failed")}catch(t){console.error("Error saving order:",t),e({allProjects:r})}},setAllProjects:t=>e({allProjects:t}),updateStatusFromSocket:(t,a)=>{e(e=>({activeProjects:{...e.activeProjects,[t]:a},startingProjects:new Set([...e.startingProjects].filter(e=>e!==t))}))}}))},5643:(e,t,a)=>{"use strict";e.exports=a(6115)},6115:(e,t,a)=>{"use strict";var n=a(2115),r=a(9033),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,n,r){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=o(e,(d=c(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var a=n(e);return void 0!==r&&r(t,a)?(o=e,t):(o=e,s=a)}var o,s,l=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,n,r]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},8693:(e,t,a)=>{"use strict";a.d(t,{vt:()=>h});let n=e=>{let t;let a=new Set,n=(e,n)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),a.forEach(a=>a(t,e))}},r=()=>t,i={setState:n,getState:r,getInitialState:()=>o,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},o=t=e(n,r,i);return i},r=e=>e?n(e):n;var i=a(2115),o=a(5643);let{useDebugValue:s}=i,{useSyncExternalStoreWithSelector:l}=o,c=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?r(e):e,a=(e,a)=>(function(e,t=u,a){a&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return s(n),n})(t,e,a);return Object.assign(a,t),a},h=e=>e?d(e):d},9033:(e,t,a)=>{"use strict";e.exports=a(2436)},9209:(e,t,a)=>{Promise.resolve().then(a.bind(a,1897))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(9209)),_N_E=e.O()}]);