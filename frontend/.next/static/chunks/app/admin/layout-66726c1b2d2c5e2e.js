(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{435:(e,t,r)=>{"use strict";function n(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[r,n]of e)if(!Object.is(n,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}r.d(t,{x:()=>n})},2436:(e,t,r)=>{"use strict";var n=r(2115),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),a=n[0].inst,u=n[1];return o(function(){a.value=r,a.getSnapshot=t,l(a)&&u({inst:a})},[e,r,t]),i(function(){return l(a)&&u({inst:a}),e(function(){l(a)&&u({inst:a})})},[e]),c(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},3553:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(5155),a=r(2115),s=r(6874),i=r.n(s),o=r(5695),c=r(6352),l=r(3626);function u(e){let{onLoginSuccess:t}=e,[r,s]=(0,a.useState)("admin"),[i,o]=(0,a.useState)(""),[c,l]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1),h=async e=>{e.preventDefault(),d(!0),l(null);try{let e=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:i})}),n=await e.json();if(!e.ok)throw Error(n.error||"Login failed");t()}catch(e){l(e.message)}finally{d(!1)}};return(0,n.jsx)("div",{className:"add-form-container",style:{maxWidth:"400px",margin:"50px auto"},children:(0,n.jsxs)("form",{onSubmit:h,className:"add-form",children:[(0,n.jsx)("h3",{children:"Admin Login"}),c&&(0,n.jsx)("p",{className:"error-message",children:c}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"username",children:"Username"}),(0,n.jsx)("input",{type:"text",id:"username",value:r,readOnly:!0,disabled:!0})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"password",children:"Password"}),(0,n.jsx)("input",{type:"password",id:"password",value:i,onChange:e=>o(e.target.value),required:!0,autoFocus:!0})]}),(0,n.jsx)("button",{type:"submit",className:"action-button add-button",disabled:u,children:u?"Logging in...":"Login"})]})})}function d(e){let{children:t}=e,{theme:r}=(0,c.D)(),s=(0,o.useRouter)(),{isAuthenticated:d,checkAuthStatus:h,logout:f}=(0,l.I)();(0,a.useEffect)(()=>{null===d&&h()},[d,h]);let m=async()=>{await f(),s.push("/")};return null===d?(0,n.jsx)("div",{className:"container ".concat(r),children:(0,n.jsx)("p",{className:"loading-indicator",children:"Checking authentication..."})}):d?(0,n.jsx)("div",{className:r,children:(0,n.jsxs)("div",{className:"admin-container",children:[(0,n.jsxs)("header",{className:"admin-header",children:[(0,n.jsx)("h1",{children:"Admin Panel"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:m,className:"action-button-table cancel",style:{marginRight:"20px"},children:"Logout"}),(0,n.jsx)(i(),{href:"/",className:"back-link",children:"â† Back to Dashboard"})]})]}),(0,n.jsxs)("div",{className:"admin-main",children:[(0,n.jsxs)("nav",{className:"admin-sidebar",children:[(0,n.jsx)(i(),{href:"/admin/projects",className:"admin-nav-link",children:"Projects"}),(0,n.jsx)(i(),{href:"/admin/labels",className:"admin-nav-link",children:"Labels"})]}),(0,n.jsx)("section",{className:"admin-content",children:t})]})]})}):(0,n.jsx)("div",{className:r,children:(0,n.jsx)(u,{onLoginSuccess:h})})}r(9324),r(6093)},3610:(e,t,r)=>{Promise.resolve().then(r.bind(r,3553))},3626:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,I:()=>i});var n=r(8693),a=r(435);let s=()=>i(e=>({isAuthenticated:e.isAuthenticated,checkAuthStatus:e.checkAuthStatus}),a.x),i=(0,n.vt)((e,t)=>({isAuthenticated:null,allProjects:[],availableLabels:[],activeProjects:{},startingProjects:new Set,isLoading:!0,error:null,checkAuthStatus:async()=>{try{let t=await fetch("/api/auth/status");if(!t.ok)throw Error("Auth check request failed");let r=await t.json();e({isAuthenticated:r.isAuthenticated})}catch(t){console.error("Auth check failed:",t),e({isAuthenticated:!1})}},logout:async()=>{try{await fetch("/api/logout",{method:"POST"})}catch(e){console.error("Logout failed:",e)}finally{e({isAuthenticated:!1})}},fetchInitialData:async()=>{e({isLoading:!0,error:null});try{let[t,r]=await Promise.all([fetch("/api/projects"),fetch("/api/labels")]);if(!t.ok)throw Error("Failed to fetch projects");if(!r.ok)throw Error("Failed to fetch labels");let n=await t.json(),a=await r.json(),s={};if(n.length>0){let e=n.map(e=>fetch("/api/check-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({port:e.port})}).then(e=>e.json()).then(t=>({name:e.project_name,running:t.running})).catch(()=>({name:e.project_name,running:!1})));(await Promise.all(e)).forEach(e=>{s[e.name]=e.running})}e({allProjects:n,availableLabels:a,activeProjects:s,isLoading:!1})}catch(t){e({error:t.message,isLoading:!1})}},handleStartProject:async r=>{let{startingProjects:n,activeProjects:a}=t();if(!n.has(r)&&!a[r]){e({startingProjects:new Set(n).add(r)});try{let e=await fetch("/api/start-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:r})});if(!e.ok)throw Error(await e.text())}catch(t){console.error("Error starting project:",t),e(e=>({error:"Failed to start ".concat(r),startingProjects:new Set([...e.startingProjects].filter(e=>e!==r))}))}}},handleStopProject:async e=>{try{await fetch("/api/stop-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:e})})}catch(e){console.error("Error stopping project:",e)}},handleDeleteProject:async(t,r)=>{if(window.confirm('Are you sure you want to delete "'.concat(r,'"? This cannot be undone.')))try{let r=await fetch("/api/projects/".concat(t),{method:"DELETE"});if(!r.ok)throw Error((await r.json()).error||"Delete failed");e(e=>({allProjects:e.allProjects.filter(e=>e.id!==t)}))}catch(e){console.error("Error deleting project:",e)}},saveOrder:async(r,n)=>{let a=t().allProjects;e({allProjects:n});try{let e=await fetch("/api/projects/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderedIds:r})});if(!e.ok)throw Error((await e.json()).error||"Save order failed")}catch(t){console.error("Error saving order:",t),e({allProjects:a})}},setAllProjects:t=>e({allProjects:t}),updateStatusFromSocket:(t,r)=>{e(e=>({activeProjects:{...e.activeProjects,[t]:r},startingProjects:new Set([...e.startingProjects].filter(e=>e!==t))}))}}))},5643:(e,t,r)=>{"use strict";e.exports=r(6115)},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},6093:()=>{},6115:(e,t,r)=>{"use strict";var n=r(2115),a=r(9033),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,o=n.useRef,c=n.useEffect,l=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=i(e,(d=l(function(){function e(e){if(!c){if(c=!0,i=e,e=n(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,o=r)}var i,o,c=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,a]))[0],d[1]);return c(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},6352:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,N:()=>i});var n=r(5155),a=r(2115);let s=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,a.useState)("light");(0,a.useEffect)(()=>{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=e||(t?"dark":"light");i(r),document.documentElement.setAttribute("data-theme",r)},[]);let o=()=>{i(e=>{let t="light"===e?"dark":"light";return localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t),t})},c=(0,a.useMemo)(()=>({theme:r,toggleTheme:o}),[r]);return(0,n.jsx)(s.Provider,{value:c,children:t})},o=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8693:(e,t,r)=>{"use strict";r.d(t,{vt:()=>h});let n=e=>{let t;let r=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,s={setState:n,getState:a,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},i=t=e(n,a,s);return s},a=e=>e?n(e):n;var s=r(2115),i=r(5643);let{useDebugValue:o}=s,{useSyncExternalStoreWithSelector:c}=i,l=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e,t=u,r){r&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);let n=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return o(n),n})(t,e,r);return Object.assign(r,t),r},h=e=>e?d(e):d},9033:(e,t,r)=>{"use strict";e.exports=r(2436)},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[533,956,874,441,684,358],()=>t(3610)),_N_E=e.O()}]);